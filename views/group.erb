<!--%= @group_elements.inspect %-->
<% @ec_class = "pt_e_config_big" #in pt_element.erb, specify electron config style: big text so can see what's highlighted %>

<% period_header = 0 # labels for periods %>

<!--p>Start of by-group elements listing</p-->

<!-- Database queries to find adjacent groups (left and right). If one doesn't exist, flagged as such to remove navigation arrows. -->
<% begin %>
	<% @left = Element.all(:group => @group-1)[0] %>
	<% left_exists = true if @left.atomic_num # OK if there is a group to the right; will go to rescue if not %>
<% rescue %>
	<% left_exists = false %>
<% end %>

<% begin %>
	<% @right = Element.all(:group => @group+1)[0] %>
	<% right_exists = true if @right.atomic_num # OK if there is a group to the right; will go to rescue if not %>
<% rescue %>
	<% right_exists = false %>
<% end %>

<table>
	<tr>
		<th>Group</th>
			<th>
				<% if left_exists %>
					<a href="/group/<%= @group-1 %>" title="Group <%= @group-1 %>"> < </a>
				<% end %>
				<%= @group %>
				<% if right_exists %>
					<a href="/group/<%= @group+1 %>" title="Group <%= @group+1 %>"> > </a>
				<% end %>
			</th>
	</tr>

<% @group_elements.each do |element| %>
	<% period_header += 1 #increment the period number in preparation for next period %>
	
	<% while element.period > period_header %>
		<tr>	
			<th class="period_header">
				<% if period_header == 1 %> Period<br> <% end %>
				<a href="/period/<%=period_header %>" title="Period <%=period_header %>"><%= period_header %></a>	
				<% period_header += 1 %>
			</th>
			<td></td>
		</tr>
	<% end %>

	<tr>
		<th class="period_header">
			<% if period_header == 1 %> Period<br> <% end %>
			<a href="/period/<%=period_header %>" title="Period <%=period_header %>"><%= period_header %></a>	
		</th>
			<td class="inPTable">
				<% @element = element %>
				<%= erb :pt_element %>
				<% lastGroup = element.group %>
			</td>
 	 </tr>
<% end %> 

</table>
<!--p>End of by-period elements listing</p-->